<!DOCTYPE html>
<html>
  <head>
    <title>JSAV ListSize Slideshow</title>
    <link rel="stylesheet" href="../../JSAV/css/JSAV.css" type="text/css" media="screen" title="no title" charset="utf-8" />
    <style>
    #container {
      width: 98%;
      position: relative;
    }
    .jsavcounter {
      position: absolute;
      top: 15px;
    }
    .jsavcanvas { height: 330px; }
    </style>
  </head>
  <body>
    <h1>JSAV ListSize Slideshow</h1>
  <div id="container">
    <div class="jsavcontrols"></div><span class="jsavcounter"></span>
    <p class="jsavoutput jsavline"></p>
    <div class="jsavcanvas"></div>
  </div>
  <style>
  </style>
    <script
       src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
    <script src="../../JSAV/lib/jquery.transit.js"></script>
    <script src="../../JSAV/lib/raphael.js"></script>
    <script src="../../JSAV/build/JSAV.js"></script>
    
    <script src="functionalListProcessing_helper.js"></script>
    
    <script>
  (function() {
    var av = new JSAV("container");
    
    //js array used for init
    var theList = [2, 6, 10, 7]; //list
    
    //code view of ListSizeHelper
    var cArray = [
    "int ListSize(List list)",
    "{",
    "    if( isNull(list) )",
    "        return 0",
    "    else",
    "        return ListSizeHelper(list, 0 )",
    "}" 
    ];
    var code = av.code(cArray);
    
    var highlighter = new CodeHighlighter(code,cArray.length);
    highlighter.lineHeight = 25;
    highlighter.setLabel(av,"ListSize Public Method");
    highlighter.advance();//first line highlighted
    
    //code view of ListSizeHelper
    var cHelperArray = [
    "int ListSizeHelper(List list, int count)",
    "{",
    "    if( isNull(list) )",
    "        return count",
    "    else",
    "        return ListSizeHelper(cdr(list), add1(count) )",
    "}" 
    ];
    var helperCode = av.code(cHelperArray);
    
    var helperHighlighter = new CodeHighlighter(helperCode,cHelperArray.length);
    helperHighlighter.lineHeight = 24.5;
    helperHighlighter.setLabel(av,"ListSize Private Helper Method");
    
    
    
    var arrays = [
    	new ArrayObj(theList, "List", "list")
    ];
    
	var vars = [
		new VarObj("Count","count", 0)
    ];
    
    //console.log("Before visualize - "+arrays.length+" and [0] label="+arrays[0].);
    //if(arrays[0]==undefined)
    //	console.log("[0] is undefined...");
    
    var visuals = new VisualsController(arrays,vars,av);
    visuals.visualize();
    
    av.umsg("This slideshow will demonstrate the execution of the ListSize method. ",{preserve: false});
    
    // Note: av.displayInit() will not affect the number of slides.
    // All that it will do is affect what you get to see on the
    
    // initial slide.
    av.displayInit();
    
    // ------------- Slide 2 ------------- //
	av.umsg("Is the list empty? ",{preserve: false});
	highlighter.moveCurrentLine(3);
	av.step();
	
	// ------------- Slide 3 ------------- //
	av.umsg("No, so go to the else block.",{preserve: false});
	highlighter.moveCurrentLine(5);
	av.step();
	
	// ------------- Slide 4 ------------- //
	av.umsg("Call the helper method to count the list elements.",{preserve: false});
	highlighter.advance();
	av.step();
	
	// ------------- Slide 5 ------------- //
	av.umsg("Call the helper method to count the list elements.",{preserve: false});
	helperHighlighter.advance();
	av.step();
	
	// ------------- Slide 6 ------------- //
	av.umsg("Is the list empty?",{preserve: false});
	helperHighlighter.moveCurrentLine(3);
	av.step();
	
	// ------------- Slide 7 ------------- //
	av.umsg("No, so go to the else block.",{preserve: false});
	helperHighlighter.moveCurrentLine(5);
	av.step();
	
	// ------------- Slide 8 ------------- //
	av.umsg("Do a recursive call, passing in Count+1 and the cdr of the list.",{preserve: false});
	helperHighlighter.moveCurrentLine(6);
	av.step();
	
	// ------------- Slide 9 ------------- //
	av.umsg("Recursive call #1.",{preserve: false});
	//change list and var
	visuals.updateArray("list",[6, 10, 7]);
	visuals.updateVar("count",1);
	visuals.redraw();
	//
	helperHighlighter.reset();
	helperHighlighter.highlightCurrent(1);
	av.step();
	
	// ------------- Slide 10 ------------- //
	av.umsg("Is the list empty?",{preserve: false});
	helperHighlighter.moveCurrentLine(3);
	av.step();
	
	// ------------- Slide 11 ------------- //
	av.umsg("No, so go to the else block.",{preserve: false});
	helperHighlighter.moveCurrentLine(5);
	av.step();
	
	// ------------- Slide 12 ------------- //
	av.umsg("Do a recursive call, passing in Count+1 and the cdr of the list.",{preserve: false});
	helperHighlighter.moveCurrentLine(6);
	av.step();
    
    // ------------- Slide 13 ------------- //
	av.umsg("Recursive call #2.",{preserve: false});
	//change list and var
	visuals.updateArray("list",[10, 7]);
	visuals.updateVar("count",2);
	visuals.redraw();
	//
	
	helperHighlighter.reset();
	helperHighlighter.highlightCurrent(1);
	av.step();
	
	// ------------- Slide 14 ------------- //
	av.umsg("Is the list empty?",{preserve: false});
	helperHighlighter.moveCurrentLine(3);
	av.step();
	
	// ------------- Slide 15 ------------- //
	av.umsg("No, so go to the else block.",{preserve: false});
	helperHighlighter.moveCurrentLine(5);
	av.step();
	
	// ------------- Slide 16 ------------- //
	av.umsg("Do a recursive call, passing in Count+1 and the cdr of the list.",{preserve: false});
	helperHighlighter.moveCurrentLine(6);
	av.step();
    
    // ------------- Slide 13 ------------- //
	av.umsg("Recursive call #3.",{preserve: false});
	//change list and var
	visuals.updateArray("list",[7]);
	visuals.updateVar("count",3);
	visuals.redraw();
	//
	
	helperHighlighter.reset();
	helperHighlighter.highlightCurrent(1);
	av.step();
	
	// ------------- Slide 14 ------------- //
	av.umsg("Is the list empty?",{preserve: false});
	helperHighlighter.moveCurrentLine(3);
	av.step();
	
	// ------------- Slide 15 ------------- //
	av.umsg("No, so go to the else block.",{preserve: false});
	helperHighlighter.moveCurrentLine(5);
	av.step();
	
	// ------------- Slide 16 ------------- //
	av.umsg("Do a recursive call, passing in Count+1 and the cdr of the list.",{preserve: false});
	helperHighlighter.moveCurrentLine(6);
	av.step();
	
	// ------------- Slide 13 ------------- //
	av.umsg("Recursive call #4.",{preserve: false});
	//change list and var
	visuals.updateArray("list",[]);
	visuals.updateVar("count",4);
	visuals.redraw();
	//
	
	helperHighlighter.reset();
	helperHighlighter.highlightCurrent(1);
	av.step();
	
	// ------------- Slide 14 ------------- //
	av.umsg("Is the list empty?",{preserve: false});
	helperHighlighter.moveCurrentLine(3);
	av.step();
	
	// ------------- Slide 15 ------------- //
	av.umsg("Yes, so return the current count. Return from recursive call #4.",{preserve: false});
	helperHighlighter.moveCurrentLine(4);
	av.step();
	
	// ------------- Slide 16 ------------- //
	av.umsg("Return the value of count returned from the recursive call #4.",{preserve: false});
	
	helperHighlighter.reset();
	helperHighlighter.highlightPrevious(5);
	helperHighlighter.highlightCurrent(6);
	av.step();
	
	// ------------- Slide 17 ------------- //
	av.umsg("Return the value of count returned from the recursive call #3.",{preserve: false});
	
	helperHighlighter.reset();
	helperHighlighter.highlightPrevious(5);
	helperHighlighter.highlightCurrent(6);
	av.step();
	
	// ------------- Slide 18 ------------- //
	av.umsg("Return the value of count returned from the recursive call #2.",{preserve: false});
	
	helperHighlighter.reset();
	helperHighlighter.highlightPrevious(5);
	helperHighlighter.highlightCurrent(6);
	av.step();
	
	// ------------- Slide 19 ------------- //
	av.umsg("Return the value of count returned from the recursive call #1.",{preserve: false});
	
	helperHighlighter.reset();
	helperHighlighter.highlightPrevious(5);
	helperHighlighter.highlightCurrent(6);
	av.step();
	
	// ------------- Slide 20 ------------- //
	av.umsg("Return the value of count returned from the helper method call.",{preserve: false});
	
	helperHighlighter.reset();
	av.step();
	
    //done with av, record av actions
    av.recorded();
    
    console.log("AV done being recorded.");
    
}());
    </script>
  </body>
</html>
